// DailyQuestionLog Model Schema
// This is the source of truth for the DailyQuestionLog model
// Uses: DeliveryStatus enum (defined in schema.prisma)
// Run: npm run prisma:combine to update schema.prisma

model DailyQuestionLog {
  id              String   @id @default(cuid())
  userId          String
  providerConfigId String
  dailyQuestionId String
  status          DeliveryStatus @default(PENDING)
  sentAt          DateTime?
  emailSent       Boolean  @default(false)
  codeSubmitted   Boolean  @default(false)
  submissionResult String?
  errorMessage    String?
  retryCount      Int      @default(0)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  user            User            @relation(fields: [userId], references: [id], onDelete: Cascade)
  providerConfig  ProviderConfig  @relation(fields: [providerConfigId], references: [id], onDelete: Cascade)
  dailyQuestion   DailyQuestion   @relation(fields: [dailyQuestionId], references: [id], onDelete: Cascade)
  
  @@unique([userId, providerConfigId, dailyQuestionId])
}

